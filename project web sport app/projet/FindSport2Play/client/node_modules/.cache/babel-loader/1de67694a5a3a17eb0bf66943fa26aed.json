{"ast":null,"code":"import jwt_decode from 'jwt-decode';\nimport axios from '../axios-lists';\nimport setAuthToken from '../utilis/setAuthToken';\nimport { GET_ERRORS, SET_CURRENT_USER, SET_AUTH_LOADING, REMOVE_AUTH_LOADING } from './types';\nexport var registerUser = function registerUser(userData, history) {\n  return function (dispatch) {\n    dispatch(setAuthLoading());\n    axios.post('/api/users/register', userData).then(function (res) {\n      var token = res.data.token;\n      localStorage.setItem('jwtToken', token);\n      setAuthToken(token);\n      var decoded = jwt_decode(token);\n      dispatch(setCurrentUser(decoded));\n      dispatch(removeAuthLoading());\n      history.push('/profile');\n    }).catch(function (err) {\n      var errorData;\n      if (err.response) errorData = err.response.data;else errorData = {\n        servererror: \"Something went wrong on the server, Try again later!\"\n      };\n      dispatch({\n        type: GET_ERRORS,\n        payload: errorData\n      });\n      dispatch(removeAuthLoading());\n    });\n  };\n};\nexport var loginUser = function loginUser(userData) {\n  return function (dispatch) {\n    dispatch(setAuthLoading());\n    axios.patch('/api/users/login', userData).then(function (res) {\n      var token = res.data.token;\n      localStorage.setItem('jwtToken', token);\n      setAuthToken(token);\n      var decoded = jwt_decode(token);\n      dispatch(setCurrentUser(decoded));\n      dispatch(removeAuthLoading());\n    }).catch(function (err) {\n      var errorData;\n      if (err.response) errorData = err.response.data;else errorData = {\n        servererror: \"Something went wrong on the server, Try again later!\"\n      };\n      dispatch({\n        type: GET_ERRORS,\n        payload: errorData\n      });\n      dispatch(removeAuthLoading());\n    });\n  };\n};\nexport var setCurrentUser = function setCurrentUser(decoded) {\n  return {\n    type: SET_CURRENT_USER,\n    payload: decoded\n  };\n};\nexport var logoutUser = function logoutUser() {\n  return function (dispatch) {\n    localStorage.removeItem('jwtToken');\n    setAuthToken(false);\n    dispatch(setCurrentUser({}));\n  };\n};\n\nvar setAuthLoading = function setAuthLoading() {\n  return {\n    type: SET_AUTH_LOADING\n  };\n};\n\nvar removeAuthLoading = function removeAuthLoading() {\n  return {\n    type: REMOVE_AUTH_LOADING\n  };\n};","map":{"version":3,"sources":["C:/Users/fatha/Desktop/projet/FindSport2Play/client/src/actions/authActions.js"],"names":["jwt_decode","axios","setAuthToken","GET_ERRORS","SET_CURRENT_USER","SET_AUTH_LOADING","REMOVE_AUTH_LOADING","registerUser","userData","history","dispatch","setAuthLoading","post","then","res","token","data","localStorage","setItem","decoded","setCurrentUser","removeAuthLoading","push","catch","err","errorData","response","servererror","type","payload","loginUser","patch","logoutUser","removeItem"],"mappings":"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","sourcesContent":["import jwt_decode from 'jwt-decode';\r\n\r\nimport axios from '../axios-lists';\r\nimport setAuthToken from '../utilis/setAuthToken';\r\nimport { GET_ERRORS, SET_CURRENT_USER, SET_AUTH_LOADING, REMOVE_AUTH_LOADING } from './types';\r\n\r\nexport const registerUser = (userData, history) => dispatch => {\r\n  dispatch(setAuthLoading());\r\n\r\n  axios.post('/api/users/register', userData)\r\n    .then(res => {\r\n      const { token } = res.data;\r\n      localStorage.setItem('jwtToken', token);\r\n      setAuthToken(token);\r\n      \r\n      const decoded = jwt_decode(token);\r\n      dispatch(setCurrentUser(decoded));\r\n      dispatch(removeAuthLoading());\r\n\r\n      history.push('/profile');\r\n    })\r\n    .catch(err => {\r\n      let errorData;\r\n      if(err.response) errorData = err.response.data;\r\n      else errorData = { servererror: \"Something went wrong on the server, Try again later!\" };\r\n\r\n      dispatch({\r\n        type: GET_ERRORS,\r\n        payload: errorData\r\n      });\r\n      dispatch(removeAuthLoading());\r\n    });\r\n};\r\n\r\nexport const loginUser = (userData) => dispatch => {\r\n  dispatch(setAuthLoading());\r\n\r\n  axios.patch('/api/users/login', userData)\r\n    .then(res => {\r\n      const { token } = res.data;\r\n      localStorage.setItem('jwtToken', token);\r\n      setAuthToken(token);\r\n      \r\n      const decoded = jwt_decode(token);\r\n      dispatch(setCurrentUser(decoded));\r\n      dispatch(removeAuthLoading());\r\n    })\r\n    .catch(err => {\r\n      let errorData;\r\n      if(err.response) errorData = err.response.data;\r\n      else errorData = { servererror: \"Something went wrong on the server, Try again later!\" }\r\n\r\n      dispatch({\r\n        type: GET_ERRORS,\r\n        payload: errorData\r\n      });\r\n      dispatch(removeAuthLoading());\r\n    });\r\n};\r\n\r\nexport const setCurrentUser = decoded => {\r\n  return {\r\n    type: SET_CURRENT_USER,\r\n    payload: decoded\r\n  };\r\n};\r\n\r\nexport const logoutUser = () => dispatch => {\r\n  localStorage.removeItem('jwtToken');\r\n  setAuthToken(false);\r\n  dispatch(setCurrentUser({}));\r\n};\r\n\r\nconst setAuthLoading = () => {\r\n  return{\r\n      type: SET_AUTH_LOADING\r\n  }\r\n}\r\n\r\nconst removeAuthLoading = () => {\r\n  return{\r\n      type: REMOVE_AUTH_LOADING\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}